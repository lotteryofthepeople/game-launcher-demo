<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Game interface</title>
    <script src="lottery-connect.js"></script>
</head>
<body style="background: aquamarine">
  <p>Player Balance: <span id="balance"></span></p>
  Game content: <pre id="game_content"></pre>
  <button type="button" onclick="buyTicket()">Play Again</button>
  <button type="button" onclick="claimPrize()">Claim Prize</button>
  <button type="button" onclick="saveGame({info: 'someSaveData'})">Save Game</button>

  <script>
      const lottery = window.lotteryApp;
      let game_state = {};

      /** Set the game ticket handler method */
      lottery.onPlay = (ticket) => {
          game_state = ticket;
          document.getElementById('balance').textContent = `$${ticket.balance}`;
          document.getElementById('game_content').textContent = JSON.stringify(ticket, null, "  ");
      };

      /** Update player balance */
      lottery.onBalanceChange = (balance) => {
          document.getElementById('balance').textContent = `$${balance}`;
      };

      /** Signal that the game is ready for receiving tickets */
      lottery.readyToPlay();

      /** Initiate the purchase of a new ticket for this game */
      const buyTicket = () => {
          lottery.buyTicket(game_state?.gameId);
      }

      /** Initiate the claiming of the prize for a winning ticket */
      const claimPrize = () => {
          lottery.claimPrize(game_state?.gameId, game_state?.ticketId);
      }

      /** Initiate the claiming of the prize for a winning ticket */
      const saveGame = (data) => {
          lottery.saveGameProgress(game_state?.gameId, game_state?.ticketId, data);
      }
  </script>
</body>
</html>